.pillow-stopwatch {
    @backgroundColor               : #FFFFFF;
    
    @aboveAverageCircleColor       : #CCE57F;
    @aboveAverageInnerCircleColor1 : #D6EA99;
    @aboveAverageInnerCircleColor2 : #E0EFB2;
    @aboveAverageInnerCircleColor3 : #EBF5CC;
    @aboveAverageInnerCircleColor4 : #F5FAE5;
    @aboveAverageInnerCircleColor5 : #F5FAE5;
    
    @belowAverageCircleColor       : #F66356;
    @belowAverageInnerCircleColor1 : #F88278;
    @belowAverageInnerCircleColor2 : #FAA19A;
    @belowAverageInnerCircleColor3 : #FBC1BB;
    @belowAverageInnerCircleColor4 : #FDE0DD;
    @belowAverageInnerCircleColor5 : #FDE0DD;
    
    @aboveAveragePieColor          : #F7FBEC;
    @aboveAverageInnerPieColor1    : #F9FCF0;
    @aboveAverageInnerPieColor2    : #FAFDF3;
    @aboveAverageInnerPieColor3    : #FCFDF7;
    @aboveAverageInnerPieColor4    : #FDFEFB;
    @aboveAverageInnerPieColor5    : #FDFEFB;
    
    @belowAveragePieColor          : #FEE8E6;
    @belowAverageInnerPieColor1    : #FEEDEB;
    @belowAverageInnerPieColor2    : #FEF1F0;
    @belowAverageInnerPieColor3    : #FEF6F5;
    @belowAverageInnerPieColor4    : #FFFAFA;
    @belowAverageInnerPieColor5    : #FFFAFA;
    
    @circleBackgroundColor         : #EEEEEE;
    
    @customCircleColorOrange       : #F8CD9C;
    @customPieColorOrange          : #FEF5EB;

    @customCircleColorPurple       : #6666CC;
    @customPieColorPurple          : #F9F9FF;

    @customCircleColorLightBlue    : #86CBCA;
    @customPieColorLightBlue       : #EDF7F7;
    
    @customCircleColorDarkBlue     : #5898BD;
    @customPieColorDarkBlue        : #E6F0F5;
    
    @customCircleColorGrey         : #CCCCCC;
    @customPieColorGrey            : #F7F7F7;
  	
    position : relative;
    display  : inline-block;
    overflow : hidden;
  	
    .set-border-color-based-on-average(@aboveAverageCircleColor, @belowAverageCircleColor) {
        &.pillow-stopwatch-quarter {
            &.pillow-stopwatch-above-average { border-color : @aboveAverageCircleColor transparent transparent transparent; }
            &.pillow-stopwatch-below-average { border-color : @belowAverageCircleColor transparent transparent transparent; }
        }

        &.pillow-stopwatch-half {
            &.pillow-stopwatch-above-average { border-color : @aboveAverageCircleColor @aboveAverageCircleColor transparent transparent; }
            &.pillow-stopwatch-below-average { border-color : @belowAverageCircleColor @belowAverageCircleColor transparent transparent; }
        }

        &.pillow-stopwatch-three-quarters {
            &.pillow-stopwatch-above-average { border-color : @aboveAverageCircleColor @aboveAverageCircleColor @aboveAverageCircleColor transparent; }
            &.pillow-stopwatch-below-average { border-color : @belowAverageCircleColor @belowAverageCircleColor @belowAverageCircleColor transparent; }
        }

        &.pillow-stopwatch-full {
            &.pillow-stopwatch-above-average { border-color : @aboveAverageCircleColor @aboveAverageCircleColor @aboveAverageCircleColor @aboveAverageCircleColor; }
            &.pillow-stopwatch-below-average { border-color : @belowAverageCircleColor @belowAverageCircleColor @belowAverageCircleColor @belowAverageCircleColor; }
        }
    }

    .set-border-color(@color) {
        &.pillow-stopwatch-quarter         { border-color : @color transparent transparent transparent; }
        &.pillow-stopwatch-half            { border-color : @color @color transparent transparent; }
        &.pillow-stopwatch-three-quarters  { border-color : @color @color @color transparent; }
        &.pillow-stopwatch-full            { border-color : @color @color @color @color; }
    }

    .set-inner-clocks-styles(@offset, @minute, @aboveAverageCircleColor, @belowAverageCircleColor, @aboveAveragePieColor, @belowAveragePieColor) {
        @topOffset      : 18px;
        @size           : 200px - @minute * @offset * 2;
        @positionOffset : @minute * @offset;

        .pillow-stopwatch-circle {
            width  : @size + 2px;
            height : @size + 2px;
            left   : @positionOffset - 1px;
            top    : @topOffset + @positionOffset - 1px;
        }

        .pillow-stopwatch-circle-colored {
            width  : @size;
            height : @size;
            left   : @positionOffset;
            top    : @topOffset + @positionOffset;

            .set-border-color-based-on-average(@aboveAverageCircleColor, @belowAverageCircleColor);
        }

        .pillow-stopwatch-pie {
            @borderWidth : 9px;

            width        : @size - 2 * @borderWidth - 2px;
            height       : @size - 2 * @borderWidth - 2px;
            left         : @positionOffset + @borderWidth + 1px;
            top          : @topOffset + @positionOffset + @borderWidth + 1px;
            border-width : (@size - 2 * @borderWidth - 2px) / 2;
        }

        .pillow-stopwatch-circle-background { .set-border-color(@backgroundColor); }
        .pillow-stopwatch-pie-colored       { .set-border-color-based-on-average(@aboveAveragePieColor, @belowAveragePieColor); }
        .pillow-stopwatch-pie-cutter        { .set-border-color(@backgroundColor); }
    }

    .pillow-stopwatch-circle,
    .pillow-stopwatch-circle-colored,
    .pillow-stopwatch-pie,
    .pillow-stopwatch-time-text,
    .pillow-stopwatch-title-text {
        -webkit-box-sizing : border-box;
           -moz-box-sizing : border-box;
                box-sizing : border-box;
    }

    .pillow-stopwatch-circle,
    .pillow-stopwatch-circle-colored,
    .pillow-stopwatch-pie {
        border-style : solid;
    }

    /**   Pillow Stopwatch Sizes   **/

    .set-sizes() {
        width  : @size;
        height : @size + @topOffset;

        .pillow-stopwatch-circle {
            width        : @size;
            height       : @size;
            left         : 0;
            top          : @topOffset;
            border-width : @borderWidth;
        }

        .pillow-stopwatch-circle-colored {
            width        : @size - 2px;
            height       : @size - 2px;
            left         : 1px;
            top          : @topOffset + 1px;
            border-width : @borderWidth - 2px;
        }

        .pillow-stopwatch-pie {
            width        : @size - @borderWidth * 2;
            height       : @size - @borderWidth * 2;
            left         : @borderWidth;
            top          : @topOffset + @borderWidth;
            border-width : (@size - @borderWidth * 2) / 2;
        }

        .pillow-stopwatch-time-text {
            width     : @size;
            top       : @timeOffset;
            font-size : @timeFontSize;
        }

        .pillow-stopwatch-title-text {
            width     : @size;
            top       : @titleOffset;
            font-size : @titleFontSize;
        }
    }

    &.size-big {
        @size          : 200px;
        @topOffset     : 18px;
        @borderWidth   : 11px;

        @timeFontSize  : 42px;
        @timeOffset    : 91px;
        @titleFontSize : 10px;
        @titleOffset   : 140px;

        .set-sizes();

        .pillow-stopwatch-btn-left, .pillow-stopwatch-btn-right {
            width  : 30px;
            height : 15px;
        }

        .pillow-stopwatch-btn-left {
            left   : 13px;
            top    : 33px;
        }

        .pillow-stopwatch-btn-right {
            left   : 158px;
            top    : 33px;
        }

        .pillow-stopwatch-btn-middle-part-1 {
            width  : 12px;
            height : 7px;
            left   : 94px;
            top    : 12px;
        }

        .pillow-stopwatch-btn-middle-part-2 {
            width  : 45px;
            height : 12px;
            left   : 77px;
            top    : 0;
        }

        .pillow-stopwatch-notch {
            width  : 5px;
            height : 32px;
            left   : 100px;
            top    : 18px;

            .origin(0, 100px);
        }

        .pillow-stopwatch-little-notch {
            width  : 2px;
            height : 11px;
            left   : 99px;
            top    : 18px;

            .origin(1px, 100px);
        }
    }

    &.size-medium {
        @size          : 120px;
        @topOffset     : 10px;
        @borderWidth   : 8px;

        @timeFontSize  : 25px;
        @timeOffset    : 46px;
        @titleFontSize : 10px;
        @titleOffset   : 75px;

        .set-sizes();

        .pillow-stopwatch-btn-left, .pillow-stopwatch-btn-right {
            width  : 16px;
            height : 7px;
        }

        .pillow-stopwatch-btn-left {
            left   : 10px;
            top    : 20px;
        }

        .pillow-stopwatch-btn-right {
            left   : 94px;
            top    : 20px;
        }

        .pillow-stopwatch-btn-middle-part-1 {
            width  : 6px;
            height : 3px;
            left   : 57px;
            top    : 7px;
        }

        .pillow-stopwatch-btn-middle-part-2 {
            width  : 25px;
            height : 7px;
            left   : 48px;
            top    : 0;
        }

        .pillow-stopwatch-pillow-stopwatch-notch,
        .pillow-stopwatch-little-notch,
        .pillow-stopwatch-inner-clocks {
            display : none;
        }
    }

    &.size-small {
        @size          : 94px;
        @topOffset     : 0px;
        @borderWidth   : 1px;

        @timeFontSize  : 17px;
        @timeOffset    : 38px;
        @titleFontSize : 0;
        @titleOffset   : 0;

        .set-sizes();

        .pillow-stopwatch-circle-colored { border-width: 6px; }

        .pillow-stopwatch-notch {
            width  : 2px;
            height : 12px;
            left   : 46px;
            top    : 1px;

            .origin(1px, 47px);
        }

        .pillow-stopwatch-button,
        .pillow-stopwatch-little-notch,
        .pillow-stopwatch-inner-clocks {
            display: none;
        }
    }

    .custom-color(@circleColor, @pieColor) {
        .pillow-stopwatch-circle {
            &.pillow-stopwatch-circle-colored {
                .set-border-color-based-on-average(@circleColor, @circleColor);
            }
        }

        .pillow-stopwatch-pie {
            &.pillow-stopwatch-pie-colored {
                .set-border-color-based-on-average(@pieColor, @pieColor);
            }
        }

        .pillow-stopwatch-inner-clocks {
            @offset: 15px;
            border-width: 10px;
            .pillow-stopwatch-clock-for-minute-1 {
                .set-inner-clocks-styles(@offset, 1, lighten(@circleColor, 4%), lighten(@circleColor, 4%), lighten(@pieColor, 0.75%), lighten(@pieColor, 0.75%));
            }
            .pillow-stopwatch-clock-for-minute-2 {
                .set-inner-clocks-styles(@offset, 2, lighten(@circleColor, 8%), lighten(@circleColor, 8%), lighten(@pieColor, 1.5%), lighten(@pieColor, 1.5%));
            }
            .pillow-stopwatch-clock-for-minute-3 {
                .set-inner-clocks-styles(@offset, 3, lighten(@circleColor, 11%), lighten(@circleColor, 11%), lighten(@pieColor, 2.25%), lighten(@pieColor, 2.25%));
            }
            .pillow-stopwatch-clock-for-minute-4 {
                .set-inner-clocks-styles(@offset, 4, lighten(@circleColor, 14%), lighten(@circleColor, 14%), lighten(@pieColor, 2.5%), lighten(@pieColor, 2.5%));
            }
            .pillow-stopwatch-clock-for-minute-5 {
                .set-inner-clocks-styles(@offset, 5, lighten(@circleColor, 14%), lighten(@circleColor, 14%), lighten(@pieColor, 2.5%), lighten(@pieColor, 2.5%));
            }
        }
    }

    &.orange     { .custom-color(@customCircleColorOrange, @customPieColorOrange); }
    &.light-blue { .custom-color(@customCircleColorLightBlue, @customPieColorLightBlue); }
    &.dark-blue  { .custom-color(@customCircleColorDarkBlue, @customPieColorDarkBlue); }
    &.grey       { .custom-color(@customCircleColorGrey, @customPieColorGrey); }
    &.purple     { .custom-color(@customCircleColorPurple, @customPieColorPurple); }

    .pillow-stopwatch-btn {
        position         : absolute;
        background-color : @circleBackgroundColor;

        &.pillow-stopwatch-btn-left  { .rotate(-43deg); }
        &.pillow-stopwatch-btn-right { .rotate(43deg); }
    }

    .pillow-stopwatch-circle {
        position      : absolute;
        border-radius : 50%;
        .rotate(45.0000000001deg); // Safari rendering fix
    	
        &.pillow-stopwatch-circle-background {
            .set-border-color(@circleBackgroundColor);
    	}

        &.pillow-stopwatch-circle-colored {
            .set-border-color-based-on-average(@aboveAverageCircleColor, @belowAverageCircleColor);
        }
    }

    .pillow-stopwatch-pie {
        position      : absolute;
        border-radius : 100%;
        .rotate(45deg);
        .border-box;
        
        &.pillow-stopwatch-pie-colored {
            .set-border-color-based-on-average(@aboveAveragePieColor, @belowAveragePieColor);
        }

        &.pillow-stopwatch-pie-cutter {
            .set-border-color(@backgroundColor);
        }
    }

    .pillow-stopwatch-inner-clocks {
        @offset: 15px;

        border-width: 10px;
        .pillow-stopwatch-clock-for-minute-1 {
            .set-inner-clocks-styles(@offset, 1, @aboveAverageInnerCircleColor1, @belowAverageInnerCircleColor1, @aboveAverageInnerPieColor1, @belowAverageInnerPieColor1);
        }

        .pillow-stopwatch-clock-for-minute-2 {
            .set-inner-clocks-styles(@offset, 2, @aboveAverageInnerCircleColor2, @belowAverageInnerCircleColor2, @aboveAverageInnerPieColor2, @belowAverageInnerPieColor2);
        }

        .pillow-stopwatch-clock-for-minute-3 {
            .set-inner-clocks-styles(@offset, 3, @aboveAverageInnerCircleColor3, @belowAverageInnerCircleColor3, @aboveAverageInnerPieColor3, @belowAverageInnerPieColor3);
        }

        .pillow-stopwatch-clock-for-minute-4 {
            .set-inner-clocks-styles(@offset, 4, @aboveAverageInnerCircleColor4, @belowAverageInnerCircleColor4, @aboveAverageInnerPieColor4, @belowAverageInnerPieColor4);
        }

        .pillow-stopwatch-clock-for-minute-5 {
            .set-inner-clocks-styles(@offset, 5, @aboveAverageInnerCircleColor5, @belowAverageInnerCircleColor5, @aboveAverageInnerPieColor5, @belowAverageInnerPieColor5);
        }
    }
  	
    .pillow-stopwatch-notch {
        position         : absolute;
        background-color : #000;
    }

    .pillow-stopwatch-little-notch {
        position         : absolute;
        background-color : #ccc;
        opacity          : 0.8;
    }

    .pillow-stopwatch-text {
        position    : absolute;
        text-align  : center;
        font-family : Tahoma;
        color       : #000;

        .pillow-stopwatch-subtitle-text {
            font-size : 12px;
            display   : none;
        }
    }
}
